FPGA 기반 스마트 환경 제어 시스템
Basys3 보드와 Verilog HDL을 이용한 다기능 환경 제어 프로젝트

🎯 프로젝트 개요
이 프로젝트는 Xilinx Basys3 FPGA 보드를 사용하여 구현한 스마트 환경 제어 시스템입니다. Verilog HDL로 작성되었으며, 스톱워치, 전자레인지, 스마트 공조기의 세 가지 주요 모드를 통해 다양한 환경 제어 기능을 제공합니다.

✨ 주요 기능
🕐 스톱워치 모드
업/다운 카운터: 시간 증가/감소 카운터 기능

일시정지: 30초 동안 정지 시 자동 표시 전환

시계 모드: 실시간 시계 표시

LED 표시: 현재 시간을 LED로 시각적 표시

🔥 전자레인지 모드
타이머 설정: 30초 단위로 시간 설정 (최대 99분 59초)

도어 제어: 서보모터를 이용한 자동 도어 개폐

안전 기능: 도어 열림 시 자동 요리 중단

요리 진행 표시: LED를 통한 요리 상태 시각화

완료 알림: 부저를 통한 요리 완료 신호

🌡️ 스마트 공조기 모드
환경 센싱: DHT11을 통한 온습도 실시간 측정

자동 모드: 온도에 따른 팬 속도 자동 조절

수동 모드: 사용자 설정 온도 기준 제어

안전 기능: 초음파 센서로 5cm 이내 물체 감지 시 자동 정지

위험 경고: 위험 감지 시 부저 및 LED 경고

🔧 하드웨어 구성
개발 보드
Xilinx Basys3 FPGA 보드 (Artix-7 FPGA)

시스템 클럭: 100MHz

센서 모듈
DHT11: 온습도 센서

HC-SR04: 초음파 거리 센서

5개 푸시 버튼: 시스템 제어용

모드 전환 스위치: 3가지 모드 전환

액추에이터
서보모터: 전자레인지 도어 제어

DC 모터: PWM 제어를 통한 팬 구동

부저: 알림음 및 경고음 생성

출력 장치
7-segment 디스플레이 (4자리): 시간, 온도, 습도 표시

16개 LED: 상태 표시 및 시각적 피드백

UART 통신: PC로 센서 데이터 전송

📱 사용법
버튼 기능
스톱워치 모드
U 버튼: 시계 모드로 전환

C 버튼: 일시정지/재시작

L 버튼: UP/DOWN 카운터 전환

전자레인지 모드
U 버튼: 시간 증가 (30초 단위)

C 버튼: 도어 열기/닫기

L 버튼: 요리 시작/일시정지

R 버튼: 정지/취소

D 버튼: 시간 감소 (30초 단위)

공조기 모드
U 버튼: 온도 설정 증가

C 버튼: 자동/수동 모드 전환

L 버튼: 온도 설정 모드 진입

D 버튼: 온도 설정 감소

모드 전환
모드 전환 스위치 + L 버튼을 동시에 눌러 3가지 모드를 순환 전환

🏗️ 시스템 아키텍처
모듈 구조
text
📦 FPGA-Based-Smart-Environment-Controller
├── 📄 Top.v              # 최상위 통합 모듈
├── 📄 fsm.v              # 상태 기계 (FSM) 제어
├── 📄 timer.v            # 타이머 기능 (스톱워치/전자레인지)
├── 📄 uart.v             # UART 통신 및 센서 데이터 처리
├── 📄 dht11_driver.v     # DHT11 온습도 센서 드라이버
├── 📄 ultrasonic.v       # 초음파 센서 제어
├── 📄 servo.v            # 서보모터 제어 (도어)
├── 📄 dc_motor.v         # DC 모터 PWM 제어 (팬)
├── 📄 buzzer.v           # 부저 제어 (멜로디/경고음)
├── 📄 led.v              # LED 상태 표시
├── 📄 tem.v              # 온도 설정 관리
├── 📄 uart_tx.v          # UART 송신 모듈
└── 📄 data_sender.v      # 센서 데이터 전송 모듈
상태 기계 설계
상위 모드
STOPWATCH (00): 스톱워치 모드

MICROWAVE (01): 전자레인지 모드

AIR_HANDLE (10): 공조기 모드

하위 상태 (각 모드별)
스톱워치: UP_COUNTER → DOWN_COUNTER → WATCH_STOP → WATCH
전자레인지: IDLE → READY → COOK → PAUSE → COOK_END
공조기: AIR_MANUAL → AIR_AUTO → STOPPED → SET_TEM

⚡ 기술적 특징
실시간 제어
10ms 정밀도: 1,000,000 클럭 분주를 통한 정확한 타이밍

PWM 제어: 10단계 듀티비 조절로 모터 속도 제어

멀티플렉싱: 7-segment 디스플레이 다중화

통신 프로토콜
UART: 9600bps로 센서 데이터 PC 전송

DHT11 프로토콜: 40비트 데이터 수신 및 파싱

서보 PWM: 20ms 주기, 1.5ms~2ms 펄스 폭

안전 시스템
다중 센서 모니터링: 온습도, 거리, 도어 상태 동시 감시

자동 보호: 위험 상황 시 즉시 시스템 정지

시각적/청각적 경고: LED 깜빡임과 사이렌 동시 출력

🚀 설치 및 실행
1. 개발 환경 준비
Xilinx Vivado (2019.1 이상 권장)

Basys3 보드 드라이버 설치

시리얼 통신 프로그램 (PuTTY, 터미널 등)

2. 하드웨어 연결
text
DHT11 센서    → JA 커넥터 (dht11_data)
초음파 센서   → JB 커넥터 (trig, echo)  
서보모터     → JC 커넥터 (servo)
DC 모터      → 모터드라이버 → JC 커넥터 (in1, in2, dc)
부저        → JA 커넥터 (buzzer)
3. 프로젝트 빌드
Vivado에서 새 프로젝트 생성

모든 .v 파일을 프로젝트에 추가

Top.v를 최상위 모듈로 설정

제약조건 파일(.xdc) 설정

합성(Synthesis) → 구현(Implementation) → 비트스트림 생성

Basys3 보드에 프로그래밍

4. 시스템 동작 확인
전원 연결 후 리셋 버튼 해제

모드 전환 스위치로 원하는 모드 선택

각 모드별 버튼 기능 테스트

UART 통신으로 센서 데이터 확인

📊 성능 특성
항목	사양
시스템 클럭	100MHz
타이머 정밀도	10ms
온도 측정 정확도	±2°C (DHT11)
거리 측정 범위	2cm~400cm
서보 제어 각도	90°~180°
PWM 분해능	10단계
UART 속도	9600bps
LED 업데이트 주기	50ms
🔧 개발 및 기여
코드 구조
모듈화 설계: 각 기능별 독립 모듈로 구성

FSM 기반: 체계적인 상태 관리

매개변수화: 쉬운 설정 변경 가능

확장 가능성
추가 센서: SPI/I2C 센서 연결 가능

무선 통신: WiFi/블루투스 모듈 추가

디스플레이: LCD/OLED 연결 가능

모바일 연동: 스마트폰 앱 개발
